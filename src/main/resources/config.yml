#  _____ _                 _   _______                        _____               _            _
# / ____(_)               | | |__   __|                      |  __ \             | |          | |
# | (___  _ _ __ ___  _ __ | | ___| | _____      ___ __  _   _| |__) | __ ___   __| |_   _  ___| |_
#  \___ \| | '_ ` _ \| '_ \| |/ _ \ |/ _ \ \ /\ / / '_ \| | | |  ___/ '__/ _ \ / _` | | | |/ __| __|
#  ____) | | | | | | | |_) | |  __/ | (_) \ V  V /| | | | |_| | |   | | | (_) | (_| | |_| | (__| |_
# |_____/|_|_| |_| |_| .__/|_|\___|_|\___/ \_/\_/ |_| |_|\__, |_|   |_|  \___/ \__,_|\__,_|\___|\__|
#                    | |                                  __/ |
#                    |_|                                 |___/
# Config version: 0.0.1
## Productive configuration
## 勿修改
version: 0.0.1
prefix: 'SimpleTownyProduct'

# 语言zh_CN en_US
locale: 'zh_CN'

## 数据备份
## Data back up
data_base:
  # 目前只有文件存储类型
  # Only 'File' for now.
  storage_type: File
  # 备份时间，设置0以禁用
  # Back up minute set 0 to disable.
  back_up: 1

# Block types configuration
# This configuration is used to define the block types that can be traded in the town.
# 一个城镇可以拥有的资源区块类型
per_town_types: 2

#resident_can_gain: false
#resident_can_trade: false

# 是否需要站在区块内获取产出
gain_private_need_stand_in_block: false

# 是否需要站在城镇内获取产出
# if gain_need_stand_in_block is flase,wheather the player need to stand in the town to doGain the block type
gain_private_need_stand_in_town: true

# 是否需要站在国家内获取产出【未启用】
# if gain_need_stand_in_town is flase,wheather the player need to stand in the nation to doGain the block type
gain_private_need_stand_in_nation: true

# Need SiegeWar Plugins
# 是否资源可被掠夺【未启用】
can_be_plundered: true
# 掠夺启用时，可掠夺以后多少次的产出数量
# if can_be_plundered is true, how many block types doGain times can be plundered in next.
plunder_gain_times: 1


# Other town can steal product
# 资源是否可被偷窃
block_can_be_steal: true
# Steal rate on next gain
# 偷窃比例：基于下次收获的数量
steal_rate: 5
# How long
# 偷窃需要站在范围内多久
steal_need_stand_in_time: 60s
# 偷窃冷却，冷却单位：s,min,hour,day,week
steal_cool_down: 5hour
# 偷窃是否需要站在区块内
# if steal_need_in_block ture, the thief should stand on special block, either in town
steal_need_in_block: true
# 偷窃中可离开目标区块的秒数
steal_temp_out_second: 5


# Block types
# 资源区块类型 公共：publics 私有：private
block_types:
  # Public block types
  # All player can gain products from the public block types
  publics:
      # 区块的名字，必须唯一
    - name: '驿站'
      key: 'post'
      map_key: 'p'
      # 一个城镇可以拥有几个同类型区块
      limit_per_town: 1
      # 一个国家可以拥有几个同类型区块
      same_nation_max: 2
      # 区块价格
      base_price: 1000
      # 区块出售[未启用]
      base_sell_price: 500
      # 区块资源基数
      base_gain_number: 100
      # 根据城镇等级提升区块资源的倍数
      town_level_exponent: 0
      # 是否可设为出售[未启用]
      for_sale_able: false
      # 互斥区块类型
      repel_block_type:
        - '驿站'
      # 是否可交易[未启用]
      trade_able: false
      # 产出冷却 冷却单位：s,min,hour,day,week
      gain_cool_down: '1hour'
      # 交易冷却
      trade_cool_down: '1day'
      # 获取产出时实际执行的命令
      # [console] 以控制台身份执行
      # [player] 以玩家身份执行
      # 支持papi变量
      gain_command:
        - '[console]money grant %player_name% 100'
  # Private block types
  # Only the owner of the town can gain products from the private block types
  privates:
    - name: '钢铁'
      key: 'iron'
      map_key: 'i'
      limit_per_town: 1
      same_nation_max: 1
      base_price: 1000
      base_sell_price: 500
      base_gain_number: 100
      town_level_exponent: 0.3
      for_sale_able: false
      repel_block_type:
        - 'TNT'
      trade_able: true
      gain_cool_down: '10hour'
      trade_cool_down: '1day'
      gain_command:
        - '[console]money grant %player_name% gun {{PRODUCT_NUMBER}}'
    - name: '魔法'
      key: 'magic'
      map_key: 'm'
      limit_per_town: 1
      same_nation_max: 2
      base_price: 1000
      base_sell_price: 500
      base_gain_number: 100
      town_level_exponent: 0.3
      for_sale_able: false
      repel_block_type:
        - 'TNT'
      trade_able: true
      gain_cool_down: '10hour'
      trade_cool_down: '1day'
      gain_command:
        - '[console]give %player_name% tnt {{PRODUCT_NUMBER}}'

# 团体争夺设置
group_war:
  enable: true
  # 争夺时间段（24小时制）
  war_time:
    start: 20 # 晚上8点
    end: 22   # 晚上10点

  # 争夺持续时间（秒）
  war_duration: 900 # 15分钟

  # 争夺积分设置
  points:
    kill: 10 # 每击杀1名玩家
    capture: 1 # 每秒占领据点
    task: 50 # 完成任务

  # 人数限制
  player_limits:
    min_attackers: 5 # 进攻方最低人数
    max_attackers_multiplier: 1.5 # 进攻方人数上限为防守方的1.5倍
    min_defenders_multiplier: 0.67 # 防守方人数下限为进攻方的2/3

  # 争夺成本
  cost:
    gold: 1000 # 发起争夺需要的金币

# 偷袭设置
sneak_attack:
  # 偷袭时间段（24小时制）
  sneak_time:
    start: 8 # 早上8点
    end: 20  # 晚上8点

  # 偷袭成功概率（基础值）
  base_success_rate: 0.5 # 50%

  # 偷袭成功概率影响因素
  success_rate_factors:
    attacker_per_player: 0.05 # 每多1名进攻方玩家，成功概率增加5%
    defender_per_player: -0.05 # 每多1名防守方玩家，成功概率降低5%
    max_success_rate: 0.7 # 成功概率上限70%
    min_success_rate: 0.3 # 成功概率下限30%

  # 偷袭成本
  cost:
    gold: 2000 # 发起偷袭需要的金币

  # 偷袭失败惩罚
  punishment:
    cooldown: 1week # 失败后1周内无法再发起争夺或偷袭（秒）
    gold: 1000 # 失败后需要支付的金币

# 监狱设置
jail:
  # 监狱位置（世界名、x、y、z）
  location:
    world: "world"
    x: 100
    y: 64
    z: 200

  # 监狱持续时间（秒）
  duration: 3600 # 1小时

# 通知设置
notifications:
  # 争夺通知
  war:
    start: "&a[争夺] &f争夺已开始！进攻方：{attacker}，防守方：{defender}。"
    end: "&a[争夺] &f争夺已结束！胜利方：{winner}。"
    point_update: "&a[争夺] &f当前积分：进攻方 {attacker_points}，防守方 {defender_points}。"

  # 偷袭通知
  sneak:
    start: "&c[偷袭] &f偷袭已开始！进攻方：{attacker}，目标地块：{plot}。"
    success: "&c[偷袭] &f偷袭成功！地块 {plot} 已归 {attacker} 所有。"
    fail: "&c[偷袭] &f偷袭失败！进攻方 {attacker} 已被收监。"

# TODO 随机增减益事件
#event_weeks_day:
#event_time: '14:00'
#events:
#  # type1: 增益事件 2:减益事件 3：挑战事件
#  - name: 'Good harvest'
#    type: 1
#    product_affect: 200%
#    last_time: 2times
#    probability: 5%
#
#  - name: 'Natural Disaster'
#    type: 2
#    product_affect: -50%
#    last_time: 2hour
#    probability: 8%
